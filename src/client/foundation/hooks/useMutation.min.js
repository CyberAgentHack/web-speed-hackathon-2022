import axios from"axios";import{useCallback,useState}from"react";import{useAuth}from"../contexts/AuthContext";export function useMutation(apiPath,{auth:auth,method:method}){const[result,setResult]=useState({data:null,error:null,loading:!0}),{loggedIn:loggedIn,userId:userId}=useAuth(),mutate=useCallback(async data=>{if(!auth||loggedIn){setResult(()=>({data:null,error:null,loading:!0}));try{const res=await axios.request({data:data,headers:auth?{"x-app-userid":userId}:{},method:method,url:apiPath});setResult(cur=>({...cur,data:res.data,loading:!1}))}catch(error){setResult(cur=>({...cur,error:error,loading:!1}))}}},[apiPath,auth,loggedIn,method,userId]);return[mutate,result]}